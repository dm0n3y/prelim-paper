% !TEX root = prelim-paper.tex

\section{Editor Calculus}\label{sec:formalism}

\note{think about name of calculus as opposed to implementation}

\subsection{Tiles, tokens, \& selections}
\input{token-syntax}
\input{selection-syntax}
\input{disassemble-tile}
\input{disassemble-selection}

\note{
  discuss the syntax of
  tiles (Fig \ref{fig:tile-syntax}),
  tokens (Fig \ref{fig:token-syntax}),
  selections (Fig \ref{fig:selection-syntax})
}

\note{
  discuss
    disassembly of tiles (Fig \ref{fig:disassemble-tile}),
    disassembly of selections (Fig \ref{fig:disassemble-selection}),
    $\succeq$ partial order and parsing function
}

\begin{definition}
  $\disassembleSelection{\Psi}{\Psi'}$ if $\Psi = \Psi'$ or
  $\Psi \searrow^* \Psi'$, where $\searrow^*$ is the transitive
  closure of $\searrow$.
\end{definition}

\begin{lemma}
  $\disassembleSelection{}{}$ is a partial order.
\end{lemma}

\begin{lemma}
  For every selection $\Psi$, there is a unique maximal
  element $\Psi'$ such that $\disassembleSelection{\Psi'}{\Psi}$.
\end{lemma}

\begin{definition}
  \note{define function that returns unique maximal element of selection}
\end{definition}


\subsection{Frames \& zippers}
\input{frame-syntax}

\subsubsection{Actions}
\note{
  Define actions more generally than \tylr~ implementation,
  such that delimiters are assigned sorts to their ends,
  selections are not restricted to shards and
  same-sort tiles, and only selections whose ends are the
  same may enter restructuring mode.
}

% (2 * [3])  ->  (2 * (3 + [_]))

\begin{itemize}
  \item explain action judgment + choice rules
  \item theorems
  \begin{itemize}
    \item movability
    \item selectability
    \item restructuring is sound and complete
  \end{itemize}
\end{itemize}

\subsection{Typechecking}
\note{
  Define tree-structured variants of tiles and frames.
  Define precedence parser that converts linear forms to tree forms
  (or assume existence of such parser?).
  Define type
}
